<!DOCTYPE html>
<html lang="en">

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recycle ICS generator</title>
    <script src="index.js" defer></script>
</head>

<body>

    <main>
        <div>
            <h1>Recycle ICS generator</h1>
            <p>Generate ICS files and links for your waste collections. </p>
            <p> Based on recycleapp.be and the Recycle! app.</p>
            <p>You can manually import the generated ICS files into your calendar, but let a tool like ICSx5/ICSDroid or a calendar app like Google Calendar or Outlook.com automatically import them for you. That way, your calendar always stays up to date with the waste collections. Note: ICSx5 works most reliably, Google Calendar for example does not support all features.</p>
            <h2>How-to</h2>
            <h3>ICSDroid / ICSx5</h3>
            <details>
                <summary>See <a href="https://icsx5.bitfire.at/usage/">ICSx5 Usage</a>.</summary>
                <p>You can subscribe to iCalendars (.ics files) with two methods:</p>
                <ol>
                    <li>Follow the webcal link in your browser or ics file in your local file manager. Select “ICSx⁵” if you’re asked which app shall open the link. </li>
                    <li>Tap “+” in the ICSx⁵ main activity.</li>
                </ol>
                <p>In both cases, the ICSx⁵ “Add subscription” activity will appear. Click on “Next”.</p>
                <p>Then, enter a title and select a color for the calendar. You can change title and color later.</p>
            </details>
            <h3>Google Calendar</h3>
            <details>
                <summary>See <a href="https://support.google.com/calendar/answer/37100?hl=en&co=GENIE.Platform%3DDesktop">Subscribe to someone’s Google Calendar</a>.</summary>
                <ol>
                    <li>On your computer, open <a href="https://calendar.google.com/" rel="noopener" target="_blank">Google Calendar</a>.</li>
                    <li>On the left, next to "Other calendars," click Add <img src="//lh3.googleusercontent.com/acEIXV8pLgZ5PXG23uIE9Ioz8RISJeLeAUH8WlHFipigJvssMhq20nQgEWQcqWn1iyM=w36-h36" alt="Add other calendars" title="Add other calendars" data-mime-type="image/png" data-alt-src="//lh3.googleusercontent.com/acEIXV8pLgZ5PXG23uIE9Ioz8RISJeLeAUH8WlHFipigJvssMhq20nQgEWQcqWn1iyM" width="18" height="18">&nbsp;<img src="//lh3.googleusercontent.com/3_l97rr0GvhSP2XV5OoCkV2ZDTIisAOczrSdzNCBxhIKWrjXjHucxNwocghoUa39gw=w36-h36" alt="and then" title="and then" data-mime-type="image/png" data-alt-src="//lh3.googleusercontent.com/3_l97rr0GvhSP2XV5OoCkV2ZDTIisAOczrSdzNCBxhIKWrjXjHucxNwocghoUa39gw" width="18" height="18"> <strong>From URL.</strong></li>
                    <li>Enter the link generated through this form.</li>
                    <li>Click <strong>Add calendar. </strong>The calendar appears on the left, under "Other calendars."</li>
                </ol>
                <p><strong>Tip:</strong> It might take up to 12 hours for changes to show in your Google Calendar.</p>
            </details>

            <h3>Outlook.com</h3>
            <details>
                <summary>See <a href="https://support.microsoft.com/en-us/topic/cff1429c-5af6-41ec-a5b4-74f2c278e98c">Import or subscribe to a calendar in Outlook.com</a></summary>
                <p><strong>Note:</strong> When you subscribe to a calendar, your calendar will automatically refresh if the other calendar is updated. This can sometimes take more than 24 hours.</p>
                <ol type="1">
                    <li><a href="https://go.microsoft.com/fwlink/p/?linkid=843379" target="_blank">Sign in to Outlook.com</a>.</li>
                    <li>At the bottom of the page, select <img src="https://support.content.office.net/en-us/media/b800323e-05b6-4501-a02c-2bafa723b06b.png" alt="Calendar" loading="lazy">. </li>
                    <li>In the navigation pane, select <b>Add calendar</b>.</li>
                    <li>
                        <p>Select <b>Subscribe from web</b>.</p>
                        <p><img src="https://support.content.office.net/en-us/media/ee5d0e9e-dc77-4873-a5b6-841e1c3b4c41.png" alt="Subscribe to a calendar" loading="lazy"> </p>
                    </li>
                    <li>Enter the URL for the calendar. </li>
                    <li>Select <b>Import</b>. </li>
                </ol>
            </details>

        </div>

        <form id="recycleForm">
            <h2>Generator form</h2>
            <p>Required fields are followed by <abbr title="required">*</abbr>.</p>
            <section>
                <h3>Language</h3>
                <p>Choose in which language the waste collection titles and descriptions should be.</p>
                <fieldset>
                    <legend>Language</legend>
                    <span>
                        <input type="radio" name="lc" id="lang_code_nl" value="nl" checked>
                        <label for="lang_code_nl">Nederlands</label>
                    </span>
                    <span>
                        <input type="radio" name="lc" id="lang_code_fr" value="fr">
                        <label for="lang_code_fr">Francais</label>
                    </span>
                    <span>
                        <input type="radio" name="lc" id="lang_code_de" value="de">
                        <label for="lang_code_de">Deutsch</label>
                    </span>
                    <span>
                        <input type="radio" name="lc" id="lang_code_en" value="en">
                        <label for="lang_code_en">English</label>
                    </span>
                </fieldset>
                <h3>Address</h3>
                <p>Waste collections are specific to your address.</p>
                <div>
                    <p>Search for your city and choose the correct city from the list.</p>
                    <label for="zipcode_q">
                        <span>Zip code: </span>
                        <strong><abbr title="required" aria-label="required">*</abbr></strong>
                    </label>
                    <input type="text" inputmode="numeric" id="zipcode_q" placeholder="3000" required>
                    <input type="hidden" id="zipcode" name="z">
                    <ul id="zipcode_results" style="display: block"></ul>

                </div>
                <div>
                    <p>Search for your street and choose the correct street from the list.</p>
                    <label for="street_q">
                        <span>Street: </span>
                        <strong><abbr title="required" aria-label="required">* </abbr></strong>
                    </label>
                    <input type="text" id="street_q" placeholder="Grote Markt" disabled required>
                    <input type=hidden id="street" name="s">
                    <ul id="street_results" style="display: block"></ul>
                </div>
                <div>
                    <p>Enter your house number.</p>
                    <label for="house_number">
                        <span>House number: </span>
                        <strong><abbr title="required" aria-label="required">*</abbr></strong>
                    </label>
                    <input type="number" id="house_number" name="hn" placeholder="1" disabled required>
                </div>
            </section>
            <section>
                <h3>Filter</h3>
                <p>Choose which fractions and events need to be included.</p>
                <fieldset>
                    <legend>Filter</legend>
                    <div>
                        <input type="checkbox" name="f" id="fractions" checked>
                        <label for="fractions">Fractions</label>
                        <p>Choose which fractions need to be included.</p>
                        <fieldset>
                            <legend>Fractions</legend>
                            <div id="fraction_container">
                              Please fill in your address first.
                            </div>
                        </fieldset>
                    </div>
                    <div>
                        <input type="checkbox" name="e" id="events" checked>
                        <label for="events">Events</label>
                    </div>
                </fieldset>
            </section>
            <section>
                <h3>Date range</h3>
                <p>
                    Choose a start date and an end date for which you want the waste collections.
                </p>
                <fieldset>
                    <legend>Date range type</legend>
                    <div>
                        <input type="radio" name="drt" id="date_range_type_abs" value="absolute" checked>
                        <label for="date_range_type_abs">Absolute:</label>
                        <p>This will get the waste collections between two dates.</p>
                        <label for="range_from">
                            <span>From: </span>
                            <strong><abbr title="required" aria-label="required">*</abbr></strong>
                        </label>
                        <input type="date" id="abs_range_from" class="date_range_type_abs" name="f" required>
                        <label for="range_to">
                            <span>To: </span>
                            <strong><abbr title="required" aria-label="required">*</abbr></strong>
                        </label>
                        <input type="date" id="abs_range_to" class="date_range_type_abs" name="t" required>
                    </div>
                    <div>
                        <input type="radio" name="drt" id="date_range_type_rel" value="relative">
                        <label for="date_range_type_rel">Relative:</label>
                        <p>This will get the waste collections relative to the current date. This is is particularly useful when auto-importing the waste collections through Google Calendar or Outlook, as it will always give the collections relative to that date. The collections will always be up-to-date like this.</p>
                        <label for="range_from">
                            <span>Days before: </span>
                            <strong><abbr title="required" aria-label="required">*</abbr></strong>
                        </label>
                        <input type="number" step=1 id="rel_range_from" class="date_range_type_rel" name="f" required value="-14" disabled>
                        <label for="range_to">
                            <span>Days after: </span>
                            <strong><abbr title="required" aria-label="required">*</abbr></strong>
                        </label>
                        <input type="number" step=1 id="rel_range_to" class="date_range_type_rel" name="t" required value="28" disabled>
                    </div>
                </fieldset>
            </section>
            <section>
                <h2>Options</h2>
                <fieldset>
                    <legend>Fraction encoding</legend>
                    <div>
                        <p>
                            <input type="radio" name="fe" id="fraction_encoding_event" value="event">
                            <label for="fraction_encoding_event">Event</label>
                        </p>
                        <p>Represent waste collections as an event.</p>
                        <p>
                            <span>
                                <label for="event_start">
                                    <span>Start time: </span>
                                    <strong><abbr title="required" aria-label="required">*</abbr></strong>
                                </label>
                                <input type="time" id="event_start" name="es" class="fraction_encoding_event" required value="07:00" disabled>
                            </span>
                            <span>
                                <label for="event_end">
                                    <span>End time: </span>
                                    <strong><abbr title="required" aria-label="required">*</abbr></strong>
                                </label>
                                <input type="time" id="event_end" name="ee" class="fraction_encoding_event" required value="10:00" disabled>
                            </span>
                        </p>
                        <p>Reminders: </p>
                        <ul id="reminder_list">
                        </ul>
                        <button id="add_reminder_button" type="button">Add reminder</button>
                    </div>
                    <div>
                        <input type="radio" name="fe" id="fraction_encoding_todo" value="todo" checked>
                        <label for="fraction_encoding_todo">Todo</label>
                        <p>Represent waste collections as a todo or task. <strong>Does not work with Google Calendar! </strong>Maybe with Outlook, that's untested.</p>
                        <ul>
                            <li>
                                <fieldset>
                                    <legend>Due type</legend>
                                    <p>
                                        <input type="radio" name="tdt" id="todo_due_type_date" class="fraction_encoding_todo" value="date">
                                        <label for="todo_due_type_date">Full day:</label>
                                    </p>
                                    <p>
                                        <span>
                                            <label for="todo_days_before">
                                                <span>Days before: </span>
                                                <strong><abbr title="required" aria-label="required">*</abbr></strong>
                                            </label>
                                            <input type="number" id="todo_days_before" name="tdb" class="fraction_encoding_todo todo_due_type_date" required value="1" disabled>
                                        </span>
                                    </p>
                                    <p>
                                        <input type="radio" name="tdt" id="todo_due_type_datetime" value="datetime" class="fraction_encoding_todo">
                                        <label for="todo_due_type_datetime">Specific time:</label>
                                    </p>
                                    <p>
                                        <span>
                                            <label for="todo_days_before">
                                                <span>Days before: </span>
                                                <strong><abbr title="required" aria-label="required">*</abbr></strong>
                                            </label>
                                            <input type="number" id="todo_days_before" name="tdb" class="fraction_encoding_todo todo_due_type_datetime" required value="1" disabled>
                                        </span>
                                        <span>
                                            <label for="todo_time">
                                                <span>Time: </span>
                                                <strong><abbr title="required" aria-label="required">*</abbr></strong>
                                            </label>
                                            <input type="time" id="todo_time" name="tt" class="fraction_encoding_todo todo_due_type_datetime" required value="20:00" disabled>
                                        </span>
                                    </p>
                                </fieldset>
                            </li>
                        </ul>
                    </div>
                </fieldset>
            </section>
            <section>
                <p>
                    <button id="submit" type="submit" disabled>Generate</button>
                </p>
            </section>
        </form>
        <section id="link" style="display: none">
            <p>
                <input id="permalink" type="text" readonly placeholder="permalink" size=50>
            </p>
            <p>
                <a download="recycle.ics" id="openLink">Open</a>
                <a download="recycle.ics" id="downloadLink">Download</a>
            </p>
        </section>
    </main>


    <li id="reminder_prototype" style="display: none">
        <fieldset>
            <legend>Reminder</legend>
            <span>
                <label for="reminder_days_before">
                    <span>Days before: </span>
                    <strong><abbr title="required" aria-label="required">*</abbr></strong>
                </label>
                <input type="number" id="reminder_days_before" name="rdb" class="fraction_encoding_event" required value="0" disabled>
            </span>
            <span>
                <label for="reminder_hours_before">
                    <span>Hours before: </span>
                    <strong><abbr title="required" aria-label="required">*</abbr></strong>
                </label>
                <input type="number" id="reminder_hours_before" name="rhb" class="fraction_encoding_event" required value="10" disabled>
            </span>
            <span>
                <label for="reminder_minutes_before">
                    <span>Minutes before: </span>
                    <strong><abbr title="required" aria-label="required">*</abbr></strong>
                </label>
                <input type="number" id="reminder_minutes_before" name="rmb" class="fraction_encoding_event" required value="0" disabled>
            </span>
            <button id="delete_reminder_button" type="button">Delete reminder</button>
        </fieldset>
    </li>

</body>

</html>
